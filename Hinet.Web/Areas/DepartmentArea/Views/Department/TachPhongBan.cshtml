@{

    ViewBag.Title = "Tách Khoa phòng";
    Layout = "~/Views/Shared/_LayoutAce.cshtml";
    ViewBag.ModuleName = "Quản lý Khoa phòng";
    ViewBag.PageName = "Tách Khoa phòng";
    //ViewBag.ModuleCode = "DocumentData_create";
}
@using Hinet.Model.IdentityEntities
@using Hinet.Model.Entities
@using Hinet.Web.Areas.DepartmentArea.Models
@using Hinet.Service.DepartmentService.DTO
@using Hinet.Service.Common
@using Hinet.Service.Constant
@model TachPhongVM
@{
    var DepartmentInfo = ViewBag.DepartmentInfo as DepartmentInfoDto;
    var LstChucVu = ViewBag.LstChucVu as List<SelectListItem>;
    var LstDepartment = ViewBag.LstDepartment as List<SelectListItem>;
    var LstNhanVien = ViewBag.LstNhanVien as List<LyLich2C>;

    var dropdownListStatus = ViewBag.dropdownListStatus as List<SelectListItem>;
}
@section ActionBarRight{
    <a href="/DocumentDataArea/DocumentData" class="btn btn-primary btn-sm"><i class="fa fa-reply"></i> Quay lại</a>
}
<h4 class="align-center">Tách Khoa phòng từ @DepartmentInfo.Name</h4>
@using (Html.BeginForm("TachPhongBan", "Department", new { @area = "DepartmentArea" }, FormMethod.Post, new { id = "createDocumentDataForm", enctype = "multipart/form-data" }))
{
@Html.AntiForgeryToken()
@Html.HiddenFor(x=>x.Id)
    //HtmlHelper.UnobtrusiveJavaScriptEnabled = false;

<div class="row">
    <div class="col-sm-10">
        <div class="form-horizontal">
            <div class="form-group">
                <label class="control-label col-sm-3">Thuộc Khoa phòng <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.DropDownListFor(m => m.phongBanNewVM.ParentId, LstDepartment, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.phongBanNewVM.ParentId, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Tên <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(m => m.phongBanNewVM.Name, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.phongBanNewVM.Name, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Mã <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(m => m.phongBanNewVM.Code, new { @class = "form-control toUpper" })
                    @Html.ValidationMessageFor(m => m.phongBanNewVM.Code, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">Loại</label>
                <div class="col-sm-8">
                    @Html.DropDownListFor(m => m.phongBanNewVM.Loai, ConstantExtension.GetDropdownData<DepartmentTypeConstant>(), new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.phongBanNewVM.Loai, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-3">Số quyết định <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(m => m.thongTinQuyetDinhVM.SoQuyetDinh, new { @class = "form-control toUpper" })
                    @Html.ValidationMessageFor(m => m.thongTinQuyetDinhVM.SoQuyetDinh, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Ngày quyết định <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(m => m.thongTinQuyetDinhVM.NgayQuyetDinh, new { @class = "form-control txt-picker" })
                    @Html.ValidationMessageFor(m => m.thongTinQuyetDinhVM.NgayQuyetDinh, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Người ký <span class="red">*</span></label>
                <div class="col-sm-8">
                    @Html.TextBoxFor(m => m.thongTinQuyetDinhVM.NguoiKy, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.thongTinQuyetDinhVM.NguoiKy, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Quyết định</label>
                <div class="col-sm-8">
                    <input type="file" name="File" class="form-control" />
                    @Html.ValidationMessage("File", "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3">Ghi chú</label>
                <div class="col-sm-8">
                    @Html.TextAreaFor(m => m.thongTinQuyetDinhVM.GhiChu, 4, 3, new { @class = "form-control resize-vertical" })
                    @Html.ValidationMessageFor(m => m.thongTinQuyetDinhVM.GhiChu, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="col-sm-offset-3 ">
                <button type="submit" class="btn btn-primary btn-sm">Hoàn thành</button>
            </div>
        </div>
    </div>
</div>
}

@section scripts{
    <script>
        $(".txt-picker").datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true, yearRange: "-50:+20",
            showWeek: false, weekHeader: "Tuần",
            language: 'vi',
            prevText: '<i class="fa fa-chevron-left"></i>',
            nextText: '<i class="fa fa-chevron-right"></i>',
            onSelect: function (date) {

            }
        });
        $("#createDocumentDataForm").validate();
    </script>
}
@Scripts.Render("~/bundles/jqueryval")